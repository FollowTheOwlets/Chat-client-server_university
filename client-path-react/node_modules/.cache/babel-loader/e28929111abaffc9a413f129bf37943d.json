{"ast":null,"code":"import { put } from \"./Request\";\n\nconst sendMessage = (recipients, title, text, obj_text, obj_title) => {\n  for (let i = 0; i < recipients.length; i++) {\n    recipients[i] = recipients[i].trim();\n\n    if (recipients[i].length !== 7 || recipients[i][0] !== '@' || isNaN(Number(recipients[i].slice(1)))) {\n      alert(\"Ошибка в списке получателей:  \" + recipients[i]);\n      return false;\n    }\n  }\n\n  if (!title.trim()) {\n    alert(\"Укажите заголовок письма.\");\n    obj_id.current.focus();\n    return false;\n  }\n\n  if (!text.trim()) {\n    alert(\"Добавьте текст письма.\");\n    obj_title.current.focus();\n    return false;\n  }\n\n  const id = localStorage.getItem(\"id\");\n  const now = new Date();\n  let [day, mon, year, hour, min, get] = [now.getDate() + 1, now.getMonth() + 1, now.getFullYear(), now.getHours(), now.getMinutes(), now.getTime()];\n  String(day).length === 1 && (day = \"0\" + day);\n  String(mon).length === 1 && (mon = \"0\" + mon);\n  String(hour).length === 1 && (hour = \"0\" + hour);\n  String(min).length === 1 && (min = \"0\" + min);\n  const time = {\n    day,\n    mon,\n    year,\n    hour,\n    min,\n    get\n  };\n  recipients.forEach(recipient => {\n    put(`new_message`, {\n      id,\n      recipient,\n      time,\n      title,\n      text\n    }, response => {\n      if (response === \"User 404\") {\n        alert(`Такого пользователя не найдено: ${recipient}`);\n      } else {\n        alert(`Письмо для ${recipient} отправлено`);\n      }\n    });\n  });\n  return true;\n};\n\nexport { sendMessage };","map":{"version":3,"names":["put","sendMessage","recipients","title","text","obj_text","obj_title","i","length","trim","isNaN","Number","slice","alert","obj_id","current","focus","id","localStorage","getItem","now","Date","day","mon","year","hour","min","get","getDate","getMonth","getFullYear","getHours","getMinutes","getTime","String","time","forEach","recipient","response"],"sources":["C:/GitHub/react_mail/src/components/functions/SendMessage.js"],"sourcesContent":["import {put} from \"./Request\";\r\n\r\nconst sendMessage = (recipients, title, text, obj_text, obj_title) => {\r\n\r\n    for (let i = 0; i < recipients.length; i++) {\r\n        recipients[i] = recipients[i].trim();\r\n        if (recipients[i].length !== 7 || recipients[i][0] !== '@' || isNaN(Number(recipients[i].slice(1)))) {\r\n            alert(\"Ошибка в списке получателей:  \" + recipients[i]);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    if (!title.trim()) {\r\n        alert(\"Укажите заголовок письма.\");\r\n        obj_id.current.focus();\r\n        return false;\r\n    }\r\n\r\n    if (!text.trim()) {\r\n        alert(\"Добавьте текст письма.\");\r\n        obj_title.current.focus();\r\n        return false;\r\n    }\r\n\r\n    const id = localStorage.getItem(\"id\");\r\n    const now = new Date();\r\n    let [day, mon, year, hour, min, get] = [now.getDate() + 1, now.getMonth() + 1, now.getFullYear(), now.getHours(), now.getMinutes(), now.getTime()];\r\n    String(day).length === 1 && (day = \"0\" + day);\r\n    String(mon).length === 1 && (mon = \"0\" + mon);\r\n    String(hour).length === 1 && (hour = \"0\" + hour);\r\n    String(min).length === 1 && (min = \"0\" + min);\r\n\r\n    const time = {day, mon, year, hour, min, get};\r\n\r\n\r\n    recipients.forEach(recipient => {\r\n        put(`new_message`, {id, recipient, time, title, text}, (response) => {\r\n            if (response === \"User 404\") {\r\n                alert(`Такого пользователя не найдено: ${recipient}`);\r\n            } else {\r\n                alert(`Письмо для ${recipient} отправлено`);\r\n            }\r\n        })\r\n    })\r\n    return true;\r\n}\r\nexport {sendMessage}"],"mappings":"AAAA,SAAQA,GAAR,QAAkB,WAAlB;;AAEA,MAAMC,WAAW,GAAG,CAACC,UAAD,EAAaC,KAAb,EAAoBC,IAApB,EAA0BC,QAA1B,EAAoCC,SAApC,KAAkD;EAElE,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,UAAU,CAACM,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;IACxCL,UAAU,CAACK,CAAD,CAAV,GAAgBL,UAAU,CAACK,CAAD,CAAV,CAAcE,IAAd,EAAhB;;IACA,IAAIP,UAAU,CAACK,CAAD,CAAV,CAAcC,MAAd,KAAyB,CAAzB,IAA8BN,UAAU,CAACK,CAAD,CAAV,CAAc,CAAd,MAAqB,GAAnD,IAA0DG,KAAK,CAACC,MAAM,CAACT,UAAU,CAACK,CAAD,CAAV,CAAcK,KAAd,CAAoB,CAApB,CAAD,CAAP,CAAnE,EAAqG;MACjGC,KAAK,CAAC,mCAAmCX,UAAU,CAACK,CAAD,CAA9C,CAAL;MACA,OAAO,KAAP;IACH;EACJ;;EAED,IAAI,CAACJ,KAAK,CAACM,IAAN,EAAL,EAAmB;IACfI,KAAK,CAAC,2BAAD,CAAL;IACAC,MAAM,CAACC,OAAP,CAAeC,KAAf;IACA,OAAO,KAAP;EACH;;EAED,IAAI,CAACZ,IAAI,CAACK,IAAL,EAAL,EAAkB;IACdI,KAAK,CAAC,wBAAD,CAAL;IACAP,SAAS,CAACS,OAAV,CAAkBC,KAAlB;IACA,OAAO,KAAP;EACH;;EAED,MAAMC,EAAE,GAAGC,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAX;EACA,MAAMC,GAAG,GAAG,IAAIC,IAAJ,EAAZ;EACA,IAAI,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAiBC,IAAjB,EAAuBC,GAAvB,EAA4BC,GAA5B,IAAmC,CAACP,GAAG,CAACQ,OAAJ,KAAgB,CAAjB,EAAoBR,GAAG,CAACS,QAAJ,KAAiB,CAArC,EAAwCT,GAAG,CAACU,WAAJ,EAAxC,EAA2DV,GAAG,CAACW,QAAJ,EAA3D,EAA2EX,GAAG,CAACY,UAAJ,EAA3E,EAA6FZ,GAAG,CAACa,OAAJ,EAA7F,CAAvC;EACAC,MAAM,CAACZ,GAAD,CAAN,CAAYd,MAAZ,KAAuB,CAAvB,KAA6Bc,GAAG,GAAG,MAAMA,GAAzC;EACAY,MAAM,CAACX,GAAD,CAAN,CAAYf,MAAZ,KAAuB,CAAvB,KAA6Be,GAAG,GAAG,MAAMA,GAAzC;EACAW,MAAM,CAACT,IAAD,CAAN,CAAajB,MAAb,KAAwB,CAAxB,KAA8BiB,IAAI,GAAG,MAAMA,IAA3C;EACAS,MAAM,CAACR,GAAD,CAAN,CAAYlB,MAAZ,KAAuB,CAAvB,KAA6BkB,GAAG,GAAG,MAAMA,GAAzC;EAEA,MAAMS,IAAI,GAAG;IAACb,GAAD;IAAMC,GAAN;IAAWC,IAAX;IAAiBC,IAAjB;IAAuBC,GAAvB;IAA4BC;EAA5B,CAAb;EAGAzB,UAAU,CAACkC,OAAX,CAAmBC,SAAS,IAAI;IAC5BrC,GAAG,CAAE,aAAF,EAAgB;MAACiB,EAAD;MAAKoB,SAAL;MAAgBF,IAAhB;MAAsBhC,KAAtB;MAA6BC;IAA7B,CAAhB,EAAqDkC,QAAD,IAAc;MACjE,IAAIA,QAAQ,KAAK,UAAjB,EAA6B;QACzBzB,KAAK,CAAE,mCAAkCwB,SAAU,EAA9C,CAAL;MACH,CAFD,MAEO;QACHxB,KAAK,CAAE,cAAawB,SAAU,aAAzB,CAAL;MACH;IACJ,CANE,CAAH;EAOH,CARD;EASA,OAAO,IAAP;AACH,CA3CD;;AA4CA,SAAQpC,WAAR"},"metadata":{},"sourceType":"module"}